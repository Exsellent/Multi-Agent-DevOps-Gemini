@startuml
!theme plain
skinparam shadowing false
skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam padding 3
skinparam component {
  BorderColor #333333
  FontSize 12
  ArrowThickness 2
}

title Multi-Agent DevOps Architecture\n9 Agents • Gemini-Powered

component "n8n Orchestrator\n(Workflow Automation Layer)" as n8n

package "MCP Agents (Docker Containers)" {
  component "Planner Agent\n:8301" as planner
  component "Progress Agent\n:8302" as progress
  component "Risks Agent\n:8303" as risks
  component "Digest Agent\n:8304" as digest
  component "Architecture Intelligence\n:8305" as architecture
  component "Health Monitor\n:8306" as health
  component "Metrics Agent\n:8307" as metrics
  component "Marathon Agent\n:8308" as marathon
  component "Code Execution Agent\n:8309" as codeexec
}

package "Core Infrastructure" {
  component "Shared Layer\n\n• MCP Protocol\n• LLM Client (Gemini)\n• Jira Client\n• Vision Provider\n• Error Handler\n• Circuit Breaker\n• Metrics Core" as shared
}

' Styling
skinparam component {
  BackgroundColor white
  FontColor black
}

' Highlights
skinparam component {
  BackgroundColor risks #d96570
  BackgroundColor architecture #9b72cb
  BackgroundColor planner #87CEEB
  BackgroundColor progress #90EE90
  BackgroundColor digest #FFFFE0
  BackgroundColor health #FF6347
  BackgroundColor metrics #008080
  BackgroundColor marathon #BA55D3
  BackgroundColor codeexec #00CED1
  BackgroundColor n8n #FFA500
  BackgroundColor shared #1e1f20
  FontColor shared white
  BorderColor shared #4285F4
}

' Connections
n8n --> planner
n8n --> progress
n8n --> risks
n8n --> digest
n8n --> architecture
n8n --> health
n8n --> metrics
n8n --> marathon
n8n --> codeexec

planner --> shared
progress --> shared
risks --> shared
digest --> shared
architecture --> shared
health --> shared
metrics --> shared
marathon --> shared
codeexec --> shared
@enduml
